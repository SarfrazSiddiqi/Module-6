<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Javascript Callbacks</title>
</head>
<body>
    <script>
        /*
			Order placed 
			After 2s -> Chef received the order and started preparing
			After 10s -> Pizza Sauce added
			After 5s -> First layer of cheeze added
			After 12s -> Toppings added
			After 5s -> Second layer of cheeze added
			After 15s -> Pizza baked!
			After 8s -> Oregano added and packed
			After 2s -> Package received at counter
			The order is ready and handed over to the Zomato delivery guy!
            */
        // console.log('order placed')

        // setTimeout (function(){
        //     console.log('chef received the order and started preparing ')
        // }, 2000)
        // setTimeout (function(){
        //     console.log('pizza souce added ')
        // }, 10000)
        // setTimeout (function(){
        //     console.log('first layer of chees added ')
        // }, 5000)
        // setTimeout (function(){
        //     console.log('toppings added ')
        // }, 12000)
        // setTimeout (function(){
        //     console.log('second layer of chees added ')
        // }, 5000)
        // setTimeout (function(){
        //     console.log('pizza baked ')
        // }, 15000)
        // setTimeout (function(){
        //     console.log('orange added and baked ')
        // }, 8000)
        // setTimeout (function(){
        //     console.log('package received at counter')
        // }, 2000)
        
        //     console.log('the order is ready and handed to zomato ')

            
            // Callback Hell - When callback calling callback repeatedly, it forms a structure like below.
		// function executeOrder(callback) {
		// 	console.log('Order placed')
		// 	setTimeout(function () {
		// 		console.log('Chef received the order and started preparing')
		// 		setTimeout(function () {
		// 			console.log('Pizza Sauce added')
		// 			setTimeout(function () {
		// 				console.log('First layer of cheeze added')
		// 				setTimeout(function () {
		// 					console.log('Toppings added')
		// 					setTimeout(function () {
		// 						console.log('Second layer of cheeze added')
		// 						setTimeout(function () {
		// 							console.log('Pizza baked!')
		// 							setTimeout(function () {
		// 								console.log('Oregano added and packed')
		// 								setTimeout(function () {
		// 									console.log('Package received at counter')
		// 									callback()
		// 								}, 2000)
		// 							}, 8000)
		// 						}, 15000)
		// 					}, 5000)
		// 				}, 12000)
		// 			}, 5000)
		// 		}, 10000)
		// 	}, 2000)
		// }

		//   removing call back using Promise


		   const chefReceivedOrder = () =>{
			 return new Promise((resolve, reject) =>{
				setTimeout(() =>{
					console.log('Chef received the order and started preparing')
				},2000)
			 })
		   }
		   
		   const pizzaSauceAdded = () =>{
			 return new Promise((resolve, reject) =>{
				setTimeout(() =>{
					console.log('Pizza Sauce added')
				}, 10000)
			 })
		   }
		   
		   const firstLayerCheese = () =>{
			 return new Promise((resolve, reject) =>{
				setTimeout(() =>{
					console.log('First layer of cheeze added')
				},5000)
			 })
		   }
		   
		   const toppingsAdded = () =>{
			 return new Promise((resolve, reject) =>{
				setTimeout(() =>{
					console.log('Toppings added')
				},12000)
			 })
		   }
		   
		   const secondLayerChees = () =>{
			 return new Promise((resolve, reject) =>{
				setTimeout(() =>{
					console.log('Second layer of cheeze added')
				},5000)
			 })
		   }

		   const pizzaBaked = () =>{
			 return new Promise((resolve, reject) =>{
				setTimeout(() =>{
					console.log('Pizza baked!')
				},15000)
			 })
		   }
		   const organoAdded = () =>{
			 return new Promise((resolve, reject) =>{
				setTimeout(() =>{
					console.log('Oregano added and packed')
				},8000)
			 })
		   }
		   const packageReceivdAtCounter = () =>{
			 return new Promise((resolve, reject) =>{
				setTimeout(() =>{
					console.log('Package received at counter')
				},2000)
			 })
		   }
		  
		const executeOrder = () => {
		  console.log('Order placed')
		  chefReceivedOrder()
			.then(pizzaSauceAdded)
			.then(firstLayerCheese)
			.then(toppingsAdded)
			.then(secondLayerChees)
			.then(pizzaBaked)
			.then(organoAdded)
			.then(packageReceivdAtCounter)
			.then(()=> console.log('The order is ready and handed over to the Zomato delivery guy!'))
			.catch((err)=> console.log(err))
		}
	</script>
</head>

<body>
	<button
		onclick="executeOrder()">Execute Order
	</button>
   
</body>
</html>