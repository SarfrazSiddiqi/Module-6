<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Js Async Await</title>
</head>
<body>
    <script>
        // ASYNC - Attach this keyword to any function - To make it asynchronous/ Handle asynchronous code
		// AWAIT - Waits for resolved state of promise (Returns resolved value of promise)
		// await should always be used inside async function

		// let promise = new Promise((resolve, reject) => {
		// 	setTimeout(() => {
		// 		resolve('Promise 1 resolved!')
		// 	}, 4000)
		// })

		// promise.then((resolvedMessage) => {
		// 	console.log('[RESOLVED] '+ resolvedMessage)
		// }).catch((rejectedMessage) => {
		// 	console.log('[REJECTED] '+ rejectedMessage)
		// })

		/* ------------------------------ */
		// async function abc() {}
		// const abc = async function () {}
		// const abc = async () => {}
		/* ------------------------------ */

		// EQUIVALENT REPRESENTATION HANDLING PROMISES USING ASYNC-AWAIT
		// const handlePromise = async function () {
		// 	try {
		// 		const resolvedMessage = await promise
		// 		console.log('[RESOLVED] '+ resolvedMessage)
		// 	} catch (rejectedMessage) {
		// 		console.log('[REJECTED] '+ rejectedMessage)
		// 	}
		// }
		// handlePromise()

		// let fetchDataFromServer = () => new Promise((resolve, reject) => {
		// 	setTimeout(() => {
		// 		resolve('[200] Fetched data successfully')
		// 	}, 4000)
		// })

		// let processData = () => new Promise((resolve, reject) => {
		// 	setTimeout(() => {
		// 		resolve('Processed data successfully')
		// 	}, 8000)
		// })

		// const fetchAndProcessData = async function () {
		// 	try {
		// 		console.log('Fetching data now ...')
		// 		const data = await fetchDataFromServer()
		// 		console.log(data)
		// 		console.log('Processing data now ...')
		// 		const processedData = await processData()
		// 		console.log(processedData)
		// 	} catch (err) {
		// 		console.log(err)
		// 	}
		// }
		// fetchAndProcessData()

		
        /*
			Order placed 
			After 2s -> Chef received the order and started preparing
			After 10s -> Pizza Sauce added
			After 5s -> First layer of cheeze added
			After 12s -> Toppings added
			After 5s -> Second layer of cheeze added
			After 15s -> Pizza baked!
			After 8s -> Oregano added and packed
			After 2s -> Package received at counter
			The order is ready and handed over to the Zomato delivery guy!
		*/
		
		const chefReceived = () => {
			return new Promise((resolve, reject) => {
				setTimeout(() => {
					console.log('Chef received the order and started preparing')
					resolve()
				}, 2000)
			})
		}

		const pizzaSauceAdded = () => {
			return new Promise((resolve, reject) => {
				setTimeout(() => {
					console.log('Pizza Sauce added')
					resolve()
				}, 10000)
			})
		}

		const firstLayerOfCheezeAdded = () => {
			return new Promise((resolve, reject) => {
				setTimeout(() => {
					console.log('First layer of cheeze added')
					resolve()
				}, 5000)
			})
		}

		const toppingsAdded = () => {
			return new Promise((resolve, reject) => {
				setTimeout(() => {
					console.log('Toppings added')
					resolve()
				}, 12000)
			})
		}

		const secondLayerOfCheezeAdded = () => {
			return new Promise((resolve, reject) => {
				setTimeout(() => {
					console.log('Second layer of cheeze added')
					resolve()
				}, 5000)
			})
		}

		const pizzaBaked = () => {
			return new Promise((resolve, reject) => {
				setTimeout(() => {
					console.log('Pizza baked!')
					resolve()
				}, 15000)
			})
		}

		const oreganoAddedAndPacked = () => {
			return new Promise((resolve, reject) => {
				setTimeout(() => {
					console.log('Oregano added and packed')
					resolve()
				}, 8000)
			})
		}

		const packageReceivedAtCounter = () => {
			return new Promise((resolve, reject) => {
				setTimeout(() => {
					console.log('Package received at counter')
					resolve()
				}, 2000)
			})
		}

		const executeOrder = async () => {
			try{
			console.log('Order placed')
			     await chefReceived()
				await (pizzaSauceAdded)
				await (firstLayerOfCheezeAdded)
				await (toppingsAdded)
				await (secondLayerOfCheezeAdded)
				await (pizzaBaked)
				await (oreganoAddedAndPacked)
				await (packageReceivedAtCounter)
				console.log('The order is ready and handed over to the Zomato delivery guy!')
		        }catch(err){
				console.log(err)
		      }
			}
    </script>
	<button onclick="executeOrder">Execute</button onclick="">
</body>
</html>